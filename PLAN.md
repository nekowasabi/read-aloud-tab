# title: èª­ã¿ä¸Šã’æ©Ÿèƒ½ã®å®Œå…¨æ€§ç¢ºä¿ï¼ˆãƒãƒ£ãƒ³ã‚¯è¨ˆç®—ã¨é€²æ—ç®¡ç†ã®ä¿®æ­£ï¼‰

## æ¦‚è¦
- è¨˜äº‹ã®èª­ã¿ä¸Šã’ãŒé€”ä¸­ã§çµ‚ã‚ã‚‹å•é¡Œã¨ã€é€²æ—ãŒæ—©æœŸã«100%ã«ãªã‚Šæ¬¡ã®ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹å•é¡Œã‚’è§£æ±ºã™ã‚‹
- ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°ã® offset è¨ˆç®—ãƒã‚°ã‚’ä¿®æ­£ã—ã€é€²æ—è¨ˆç®—ã‚’å®Ÿéš›ã®éŸ³å£°å®Œäº†ã¨åŒæœŸã•ã›ã‚‹

### goal
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé•·æ–‡è¨˜äº‹ã‚’èª­ã¿ä¸Šã’æ©Ÿèƒ½ã§åˆ©ç”¨ã™ã‚‹éš›ã€æœ€å¾Œã¾ã§é€”åˆ‡ã‚Œã‚‹ã“ã¨ãªãèª­ã¿ä¸Šã’ãŒå®Œäº†ã™ã‚‹
- é€²æ—ãƒãƒ¼ãŒå®Ÿéš›ã®éŸ³å£°å†ç”Ÿã¨åŒæœŸã—ã€éŸ³å£°å®Œäº†å‰ã«æ¬¡ã®ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ã‚ã‚‰ãªã„

## å¿…é ˆã®ãƒ«ãƒ¼ãƒ«
- å¿…ãš `CLAUDE.md` ã‚’å‚ç…§ã—ã€ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‹ã“ã¨

## é–‹ç™ºã®ã‚´ãƒ¼ãƒ«
- textChunker.ts ã® startOffset è¨ˆç®—ãƒã‚°ã‚’ä¿®æ­£ã—ã€ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ãŒæ­£ç¢ºã«è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
- TTSEngine ã®é€²æ—è¨ˆç®—ã‚’ä¿®æ­£ã—ã€éŸ³å£°å†ç”Ÿå®Œäº†ã¾ã§100%ã«åˆ°é”ã—ãªã„ã‚ˆã†ã«ã™ã‚‹
- ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ offset è¨ˆç®—ã¨é€²æ—è¨ˆç®—ã®æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã™ã‚‹
- å®Ÿéš›ã®é•·æ–‡è¨˜äº‹ã§æœ€å¾Œã¾ã§èª­ã¿ä¸Šã’ãŒå®Œäº†ã—ã€é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ¬¡ã®ã‚¿ãƒ–ã«ç§»è¡Œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

## å®Ÿè£…ä»•æ§˜

### å•é¡Œ1: textChunker ã® startOffset è¨ˆç®—ãƒã‚°
**src/shared/utils/textChunker.ts:123-124** ã« startOffset è¨ˆç®—ã®ãƒã‚°ãŒå­˜åœ¨ã™ã‚‹:

```typescript
// ç¾åœ¨ã®ãƒã‚°ã‚³ãƒ¼ãƒ‰ï¼ˆé–“é•ã„ï¼‰
currentChunk = sentence;
currentStartOffset += currentChunk.length;  // æ–°ã—ã„sentenceã®é•·ã•ã‚’è¶³ã—ã¦ã„ã‚‹
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€**æ–°ã—ã„ãƒãƒ£ãƒ³ã‚¯ï¼ˆsentenceï¼‰ã®é•·ã•**ã‚’ offset ã«è¶³ã—ã¦ã—ã¾ã£ã¦ãŠã‚Šã€**å‰ã®ãƒãƒ£ãƒ³ã‚¯ã®é•·ã•**ãŒè€ƒæ…®ã•ã‚Œã¦ã„ãªã„ã€‚

#### å½±éŸ¿
1. **offsetã®ãšã‚Œ**: å„ãƒãƒ£ãƒ³ã‚¯ã® startOffset/endOffset ãŒå®Ÿéš›ã®ãƒ†ã‚­ã‚¹ãƒˆä½ç½®ã¨ãšã‚Œã‚‹
2. **é€²æ—è¨ˆç®—ã®èª¤ã‚Š**: onboundary ã‚¤ãƒ™ãƒ³ãƒˆã§ã® currentPosition è¨ˆç®—ãŒç‹‚ã†
3. **èª­ã¿ä¸Šã’ç¯„å›²ã®ä¸è¶³**: ãƒãƒ£ãƒ³ã‚¯ãŒå…ƒã®ãƒ†ã‚­ã‚¹ãƒˆå…¨ä½“ã‚’ã‚«ãƒãƒ¼ã—ãã‚Œãšã€é€”ä¸­ã§çµ‚ã‚ã‚‹

#### ä¿®æ­£æ–¹é‡ï¼ˆOption Aï¼‰
é †åºã‚’ä¿®æ­£ã™ã‚‹:
```typescript
// æ­£ã—ã„ã‚³ãƒ¼ãƒ‰
currentStartOffset += currentChunk.length;  // å…ˆã«å‰ã®ãƒãƒ£ãƒ³ã‚¯ã®é•·ã•ã‚’è¶³ã™
currentChunk = sentence;  // ãã®å¾Œã€æ–°ã—ã„ãƒãƒ£ãƒ³ã‚¯ã‚’é–‹å§‹
```

#### å…·ä½“ä¾‹
ãƒ†ã‚­ã‚¹ãƒˆ: "ã“ã‚“ã«ã¡ã¯ã€‚ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã§ã™ã€‚ã•ã‚ˆã†ãªã‚‰ã€‚" (45æ–‡å­—)
maxChunkSize=15 ã®å ´åˆï¼š

**ä¿®æ­£å‰ï¼ˆé–“é•ã„ï¼‰:**
- chunk 0: startOffset=0, endOffset=7, text="ã“ã‚“ã«ã¡ã¯ã€‚"
- æ¬¡ã® currentStartOffset = 0 + **10** = 10 â† é–“é•ã„ï¼ˆsentenceã®é•·ã•ï¼‰
- chunk 1: startOffset=**10**, endOffset=20 â† ãšã‚Œã¦ã„ã‚‹

**ä¿®æ­£å¾Œï¼ˆæ­£ã—ã„ï¼‰:**
- chunk 0: startOffset=0, endOffset=7, text="ã“ã‚“ã«ã¡ã¯ã€‚"
- æ¬¡ã® currentStartOffset = 0 + **7** = 7 âœ“ï¼ˆå‰ã®chunkã®é•·ã•ï¼‰
- chunk 1: startOffset=**7**, endOffset=17 âœ“ æ­£ç¢º

### å•é¡Œ2: é€²æ—è¨ˆç®—ã®æ—©æœŸ100%åˆ°é”
**src/background/ttsEngine.ts** ã®é€²æ—è¨ˆç®—ã«ãŠã„ã¦ã€`onboundary` ã‚¤ãƒ™ãƒ³ãƒˆãŒéŸ³å£°å†ç”Ÿå‰ã«ç™ºç«ã™ã‚‹ãŸã‚ã€é€²æ—ãŒå®Ÿéš›ã®éŸ³å£°å®Œäº†ã‚ˆã‚Šæ—©ã100%ã«é”ã™ã‚‹å•é¡ŒãŒå­˜åœ¨ã™ã‚‹ã€‚

#### ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
```
1. ãƒ†ã‚­ã‚¹ãƒˆ: "ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã§ã™ã€‚" (æœ€å¾Œã®ãƒãƒ£ãƒ³ã‚¯)
2. onboundary (æœ€å¾Œã®æ–‡å­—) ç™ºç« â†’ progress = 100% ğŸš¨
3. UI ãŒã€Œå®Œäº†ã€ã¨åˆ¤æ–­ â†’ æ¬¡ã®ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
4. [2-3ç§’ã®é…å»¶]
5. "ã§ã™ã€‚" ã®éŸ³å£°å†ç”ŸãŒå®Œäº†
6. onend ç™ºç« â†’ playNextChunk() å‘¼ã³å‡ºã—
   ã—ã‹ã—æ—¢ã«UIã¯æ¬¡ã®ã‚¿ãƒ–ã«ç§»å‹•æ¸ˆã¿
```

#### å½±éŸ¿
1. **éŸ³å£°ã®é€”åˆ‡ã‚Œ**: æœ€å¾Œã®æ•°ç§’ãŒå†ç”Ÿã•ã‚Œã‚‹å‰ã«æ¬¡ã®ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹
2. **UX ã®ä½ä¸‹**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Œå…¨ã«èãçµ‚ã‚ã‚‹å‰ã«å†…å®¹ãŒå¤‰ã‚ã‚‹
3. **é€²æ—ã®ä¸æ­£ç¢ºã•**: é€²æ—ãƒãƒ¼ãŒå®Ÿéš›ã®å†ç”ŸçŠ¶æ…‹ã‚’åæ˜ ã—ã¦ã„ãªã„

#### ä¿®æ­£æ–¹é‡ï¼ˆOption Aï¼‰
é€²æ—ã‚’99%ã§ã‚­ãƒ£ãƒƒãƒ—ã—ã€`onend` ã§ç¢ºå®Ÿã«100%ã«ã™ã‚‹:

```typescript
// calculateProgress() ã®ä¿®æ­£
private calculateProgress(): number {
  if (this.totalLength === 0) {
    return 0;
  }
  const ratio = this.currentPosition / this.totalLength;
  // 99%ã§ã‚­ãƒ£ãƒƒãƒ—ï¼ˆonend ã§100%ã«ã™ã‚‹ï¼‰
  return Math.max(0, Math.min(99, ratio * 100));
}

// bindUtteranceEventsForChunk() ã®ä¿®æ­£
utterance.onend = () => {
  if (!this.isPaused) {
    // å®Œäº†æ™‚ã«æ˜ç¤ºçš„ã«100%ã‚’é€šçŸ¥
    if (this.currentHooks?.onProgress) {
      this.currentHooks.onProgress(100);
    }
    // ãã®å¾Œã€æ¬¡ã®ãƒãƒ£ãƒ³ã‚¯ã¸ç§»å‹•
    this.playNextChunk().catch(...);
  }
};
```

#### ä»–ã®é¸æŠè‚¢
- **Option B**: æœ€å¾Œã®ãƒãƒ£ãƒ³ã‚¯ã®ã¿95%ã§ã‚­ãƒ£ãƒƒãƒ—ï¼ˆã‚ˆã‚Šæ­£ç¢ºã ãŒè¤‡é›‘ï¼‰
- **Option C**: onboundary ã® debounce å‡¦ç†ï¼ˆè¤‡é›‘ã§ãƒ¡ãƒªãƒƒãƒˆãŒå°‘ãªã„ï¼‰

## ç”ŸæˆAIã®å­¦ç¿’ç”¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
### å®Ÿè£…å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
- src/shared/utils/textChunker.ts
  - chunkText é–¢æ•°ã® startOffset è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- src/background/ttsEngine.ts
  - calculateProgress ãƒ¡ã‚½ãƒƒãƒ‰ã®é€²æ—è¨ˆç®—ä¸Šé™
  - bindUtteranceEventsForChunk ãƒ¡ã‚½ãƒƒãƒ‰ã® onend ãƒãƒ³ãƒ‰ãƒ©

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
- src/shared/utils/__tests__/textChunker.test.ts
  - offset è¨ˆç®—ã®æ­£ç¢ºæ€§ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆ
- src/background/__tests__/ttsEngine.test.ts
  - é€²æ—ãŒ99%ã§ã‚­ãƒ£ãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  - onend ã§100%ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª

### å‚ç…§ãƒ•ã‚¡ã‚¤ãƒ«
- src/background/tabManager.ts
  - handlePlaybackProgress: é€²æ—å—ä¿¡ã¨æ¬¡ã‚¿ãƒ–ã¸ã®åˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯
- src/background/offscreen/offscreen.ts
  - TTSEngine ã®åˆ©ç”¨ç®‡æ‰€

## Process
### process1 textChunker.ts ã®ãƒã‚°ä¿®æ­£
#### sub1 startOffset è¨ˆç®—é †åºã®ä¿®æ­£
@target: src/shared/utils/textChunker.ts
@ref: ãªã—
- [x] 123-124è¡Œç›®ã®é †åºã‚’ä¿®æ­£
  - `currentStartOffset += currentChunk.length;` ã‚’å…ˆã«å®Ÿè¡Œ
  - ãã®å¾Œ `currentChunk = sentence;` ã‚’å®Ÿè¡Œ
  - ã“ã‚Œã«ã‚ˆã‚Šã€å‰ã®ãƒãƒ£ãƒ³ã‚¯ã®é•·ã•ãŒæ­£ç¢ºã« offset ã«åæ˜ ã•ã‚Œã‚‹

### process2 åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã®è¿½åŠ 
#### sub1 textChunker ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ
@target: src/shared/utils/__tests__/textChunker.test.ts
@ref: src/shared/utils/textChunker.ts
- [x] ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆ
- [x] offset è¨ˆç®—ã®æ­£ç¢ºæ€§ã‚’æ¤œè¨¼
  - å„ãƒãƒ£ãƒ³ã‚¯ã® startOffset/endOffset ãŒé€£ç¶šã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
  - å…¨ãƒãƒ£ãƒ³ã‚¯ã® endOffset ãŒå…ƒã®ãƒ†ã‚­ã‚¹ãƒˆé•·ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- [x] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
  - ç©ºãƒ†ã‚­ã‚¹ãƒˆ
  - å˜ä¸€ãƒãƒ£ãƒ³ã‚¯ï¼ˆmaxChunkSize ä»¥ä¸‹ï¼‰
  - è¤‡æ•°ãƒãƒ£ãƒ³ã‚¯ï¼ˆé•·æ–‡ï¼‰
  - å¢ƒç•Œæ¡ä»¶ï¼ˆã¡ã‚‡ã†ã© maxChunkSizeï¼‰
- [x] ãƒãƒ£ãƒ³ã‚¯ãƒ†ã‚­ã‚¹ãƒˆã®æ•´åˆæ€§æ¤œè¨¼
  - å…¨ãƒãƒ£ãƒ³ã‚¯ã‚’çµåˆã™ã‚‹ã¨å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª

### process10 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- process2 ã§å®Ÿæ–½æ¸ˆã¿

### process50 ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—: é€²æ—è¨ˆç®—ã®ä¿®æ­£
#### sub1 é€²æ—è¨ˆç®—ã®99%ã‚­ãƒ£ãƒƒãƒ—å®Ÿè£…
@target: src/background/ttsEngine.ts
@ref: ãªã—
- [ ] calculateProgress() ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¿®æ­£
  - é€²æ—ã®ä¸Šé™ã‚’99%ã«å¤‰æ›´ï¼ˆ100% ã¯ onend ã§ã®ã¿åˆ°é”ï¼‰
  - è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯: `Math.min(99, ratio * 100)`

#### sub2 onend ã§ã®100%é€²æ—é€šçŸ¥
@target: src/background/ttsEngine.ts
@ref: ãªã—
- [ ] bindUtteranceEventsForChunk() ãƒ¡ã‚½ãƒƒãƒ‰ã® onend ãƒãƒ³ãƒ‰ãƒ©ã‚’ä¿®æ­£
  - playNextChunk() ã®å‰ã« `hooks.onProgress(100)` ã‚’å‘¼ã³å‡ºã—
  - éŸ³å£°å®Œäº†æ™‚ã«ç¢ºå®Ÿã«100%ã‚’é€šçŸ¥ã—ã¦ã‹ã‚‰æ¬¡ã®ãƒãƒ£ãƒ³ã‚¯ã¸ç§»è¡Œ

#### sub3 é€²æ—è¨ˆç®—ã®ãƒ†ã‚¹ãƒˆè¿½åŠ 
@target: src/background/__tests__/ttsEngine.test.ts
@ref: src/background/ttsEngine.ts
- [ ] é€²æ—ãŒ99%ã§ã‚­ãƒ£ãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- [ ] onend ã§100%ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå¼•ãç¶šããƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

### process60 AIè¦ç´„ã®é€”ä¸­åˆ‡ã‚Œå•é¡Œä¿®æ­£
#### sub1 maxSummaryTokens ã®å¢—åŠ 
@target: src/background/tabManager.ts, src/background/aiProcessor.ts
@ref: ãªã—
- [x] maxSummaryTokens ã‚’ 500 â†’ 1500 ã«å¢—åŠ ï¼ˆ3å€ï¼‰
  - tabManager.ts (line 128): AiProcessoråˆæœŸåŒ–æ™‚ã®è¨­å®š
  - aiProcessor.ts (line 36): ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®å¤‰æ›´
  - ã“ã‚Œã«ã‚ˆã‚Šã€è¦ç´„ãŒæœ€å¾Œã¾ã§å®Œäº†ã™ã‚‹ååˆ†ãªé•·ã•ã‚’ç¢ºä¿

#### sub2 ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ”¹å–„
@target: src/shared/utils/storage.ts
@ref: ãªã—
- [x] summaryPrompt ã®æ”¹å–„ (line 31)
  - å®Œå…¨ãªè¦ç´„ã‚’ä¿è¨¼ã™ã‚‹æŒ‡ç¤ºã‚’è¿½åŠ 
  - æ§‹é€ åŒ–ã•ã‚ŒãŸè¦ç´„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆãƒ»è©³ç´°ãƒ»çµè«–ï¼‰
  - æœ€å¾Œã«å¿…ãšçµè«–ã‚’å«ã‚ã‚‹ã‚ˆã†æ˜ç¤ºçš„ã«æŒ‡ç¤º

#### å•é¡Œã®è©³ç´°
ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°è§£æã«ã‚ˆã‚Šåˆ¤æ˜:
- TTS/ãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¯å®Œç’§ã«å‹•ä½œï¼ˆ17ãƒãƒ£ãƒ³ã‚¯å…¨ã¦æ­£å¸¸å†ç”Ÿï¼‰
- å®Ÿéš›ã®å•é¡Œ: AIè¦ç´„ãŒé€”ä¸­ã§åˆ‡ã‚Œã¦ã„ã‚‹ï¼ˆ883æ–‡å­—ã§"...ã¿ãŸã„ãªã€‚"ã¨çµ‚äº†ï¼‰
- åŸå› : maxSummaryTokens=500 ãŒå°ã•ã™ãã¦ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™ã§æ‰“ã¡åˆ‡ã‚‰ã‚Œã‚‹
- å½±éŸ¿: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨˜äº‹ã®å…¨ä½“åƒã‚’æŠŠæ¡ã§ããšã€èª­ã¿ä¸Šã’ãŒä¸è‡ªç„¶ã«çµ‚ã‚ã‚‹

#### æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ
- è¦ç´„ãŒæœ€å¾Œã¾ã§å®Œäº†ã™ã‚‹ï¼ˆçµè«–ã‚’å«ã‚€å®Œå…¨ãªè¦ç´„ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨˜äº‹ã®å…¨ä½“åƒã‚’æ­£ç¢ºã«æŠŠæ¡ã§ãã‚‹
- èª­ã¿ä¸Šã’ãŒé€”ä¸­ã§ä¸è‡ªç„¶ã«çµ‚ã‚ã‚‹å•é¡ŒãŒè§£æ¶ˆã•ã‚Œã‚‹

### process100 ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

### process200 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- [x] PLAN.md ã®ä½œæˆï¼ˆæœ¬ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] ä¿®æ­£å†…å®¹ã‚’ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«è¨˜è¼‰
  - process1-2: "fix(textChunker): correct startOffset calculation in chunk splitting"
  - process50: "fix(tts): cap progress at 99% until audio playback completes"
  - process60: "fix(ai): increase maxSummaryTokens and improve summary prompt for complete summaries"
